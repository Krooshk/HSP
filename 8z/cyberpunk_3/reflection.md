Сделал аналогичным образом. Также не забыл предварительно выходить из цикла, если условие не соблюдается.